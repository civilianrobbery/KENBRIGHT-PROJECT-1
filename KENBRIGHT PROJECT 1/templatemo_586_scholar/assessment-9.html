<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Gill+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Module 9 Assessment | Kenbright IFRS 17 Training</title>
    
    <!-- CSS Files -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-scholar.css">
    <link rel="stylesheet" href="assets/css/modules.css">
    <style>
        /* Apply Gill Sans font to entire page */
        body {
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Gill Sans', sans-serif;
            font-weight: 600;
        }
        
        .nav li a {
            font-family: 'Gill Sans', sans-serif;
        }
        
        .btn, .main-button a {
            font-family: 'Gill Sans', sans-serif;
        }

        /* Simplified header styling */
        .header-area {
            padding: 0 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .main-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 0;
        }

        /* Ensure navigation items are properly spaced */
        .main-nav .nav {
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .main-nav .nav li a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .main-nav .nav li a:hover {
            color: #3B82F6;
        }

        /* Search input styling */
        .search-input {
            flex: 1;
            max-width: 400px;
            margin: 0 20px;
            position: relative;
        }

        .search-input input {
            width: 100%;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .search-input i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        /* Logo Styles */
        .logo-image {
            height: 130px;
            width: auto;
            max-width: 500px;
        }

        .page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .page-loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .assessment-container {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 30px 0;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .question-number {
            background: #667eea;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .option-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .option-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .option-item.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }
        
        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }
        
        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .results-container {
            display: none;
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #e9ecef;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
            font-family: 'Gill Sans', sans-serif;
        }
        
        .progress-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-nav {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-input {
                max-width: 100%;
                margin: 10px 0;
            }
            
            .main-nav .nav {
                gap: 15px;
            }
            
            .logo-image {
                height: 35px;
                max-width: 150px;
            }
        }

        @media (max-width: 480px) {
            .logo-image {
                height: 30px;
                max-width: 130px;
            }
        }
    </style>
</head>

<body>

  <!-- Page Loader -->
  <div class="page-loader" id="pageLoader">
      <div class="loader-content">
          <div class="kenbright-loader">Kenbright</div>
          <div class="loader-spinner"></div>
          <div class="loader-text">Loading Assessment...</div>
      </div>
  </div>

  <!-- Header Area -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <a href="index.html" class="logo">
                        <img src="assets/images/kenbright-logo.png" alt="Kenbright" class="logo-image">
                    </a>
                    <ul class="nav">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="modules.html">Training Modules</a></li>
                        <li><a href="assessments.html" class="active">Test Assessments</a></li>
                        <li><a href="progress.html">My Progress</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
  </header>

  <!-- Page Banner -->
  <div class="main-banner" id="top">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="header-text">
            <h2>Module 9 Assessment</h2>
            <p>Risk Adjustment</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Assessment Container -->
  <section class="section">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          
          <div class="quiz-header">
            <h3><i class="fa fa-question-circle"></i> Module 9 Quiz</h3>
            <p>Test your understanding of Risk Adjustment</p>
            <div class="progress" style="height: 8px; background: rgba(255,255,255,0.3);">
              <div class="progress-bar" id="quizProgress" style="width: 0%"></div>
            </div>
            <small id="progressText">Question 1 of 15</small>
          </div>

          <div class="assessment-container">
            <div id="questionsContainer">
              <!-- Questions will be loaded here by JavaScript -->
            </div>
            
            <div class="navigation-buttons">
              <button class="main-button outline" id="prevQuestion" style="display: none;">
                <i class="fa fa-arrow-left"></i> Previous
              </button>
              <button class="main-button" id="submitQuiz" style="display: none;">
                Submit Assessment
              </button>
              <button class="main-button" id="nextQuestion" style="display: none;">
                Next <i class="fa fa-arrow-right"></i>
              </button>
            </div>
          </div>

          <div class="results-container" id="resultsContainer">
            <h3 class="text-center"><i class="fa fa-chart-bar"></i> Assessment Results</h3>
            <div class="score-display" id="finalScore">0/15</div>
            
            <div class="progress-summary">
              <div class="progress" style="height: 20px;">
                <div class="progress-bar" id="scoreProgress" role="progressbar" style="width: 0%"></div>
              </div>
              <div class="progress-text text-center mt-2">
                <span id="scorePercentage">0%</span> - <span id="performanceText">Beginner Level</span>
              </div>
            </div>

            <div id="questionsReview">
              <!-- Questions review will be loaded here -->
            </div>

            <div class="text-center mt-4">
              <button class="main-button outline" onclick="window.location.href='module-9.html'">
                <i class="fa fa-book"></i> Review Module
              </button>
              <button class="main-button" id="nextModuleBtn" onclick="window.location.href='module-10.html'">
                <i class="fa fa-arrow-right"></i> Proceed to Module 10
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="col-lg-12">
        <p>Copyright Â© <span id="currentYear">2025</span> Kenbright IFRS 17 Training Platform. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  
  <script>
    // Module 9 Questions Data with UPDATED CORRECT answers
    const module9Questions = [
      {
        question: "Which of the following is NOT a requirement when determining the Contractual Service Margin (CSM) under IFRS 17?",
        options: [
          "Adjusting for the time value of money using current discount rates",
          "Including all acquisition cash flows, regardless of recoverability",
          "Recognizing the CSM over the coverage period based on services provided",
          "Ensuring no day-one profit is recognized"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "The CSM must exclude acquisition cash flows that are not recoverable, not include all regardless of recoverability."
      },
      {
        question: "Which of the following is NOT a requirement when determining discount rates under IFRS 17?",
        options: [
          "Reflect the time value of money",
          "Be consistent with observable current market prices",
          "Be based on the entity's internal cost of capital",
          "Reflect characteristics of the cash flows of the insurance contracts"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "Discount rates should not be based on the entity's internal cost of capital but on observable market data."
      },
      {
        question: "Which of the following is NOT a required component in the measurement of the fulfilment cash flows under IFRS 17?",
        options: [
          "An explicit risk adjustment for non-financial risk",
          "The present value of unbiased, probability-weighted future cash flows",
          "A provision for future operating profits",
          "Current estimates that are explicit and unbiased"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "A provision for future operating profits is not a component of fulfilment cash flows under IFRS 17."
      },
      {
        question: "Which of the following is NOT a characteristic of the Liability for Remaining Coverage (LRC) under the Premium Allocation Approach (PAA)?",
        options: [
          "It is measured as the unearned premium, adjusted for acquisition costs",
          "It is not discounted unless there is a significant financing component",
          "It includes a risk adjustment for non-financial risk",
          "It is systematically released as insurance revenue over the coverage period"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "The LRC under PAA does not typically include a risk adjustment component."
      },
      {
        question: "Which of the following is NOT a key objective of IFRS 17's measurement model?",
        options: [
          "To provide consistent principles for measuring insurance contracts",
          "To recognize profit from insurance contracts as services are provided",
          "To maximize reported equity at initial recognition",
          "To provide useful information about the amount, timing, and uncertainty of cash flows"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "Maximizing reported equity is not an objective; the model aims for faithful representation."
      },
      {
        question: "Which of the following is NOT a requirement for the presentation of insurance revenue in the statement of profit or loss?",
        options: [
          "It must exclude investment components",
          "It must depict the transfer of promised services at an amount that reflects the consideration to which the entity expects to be entitled",
          "It must be presented net of all acquisition costs incurred",
          "It must include the portion of the premium that relates to the recovery of incurred claims"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "Insurance revenue is not presented net of acquisition costs; these are separate line items."
      },
      {
        question: "Which of the following is NOT a requirement for grouping insurance contracts for measurement purposes?",
        options: [
          "Contracts must be grouped into portfolios",
          "Contracts in the same portfolio must be grouped based on similar risk and managed together",
          "Contracts issued in different financial years can always be grouped together",
          "Contracts that are onerous at inception must be grouped separately"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "Contracts issued in different years generally cannot be grouped together; they form annual cohorts."
      },
      {
        question: "Which of the following is NOT a feature of the Variable Fee Approach (VFA)?",
        options: [
          "It is used for contracts with direct participation features",
          "The CSM is adjusted for changes in the underlying items",
          "The discount rate is locked in at contract inception and never updated",
          "The entity's share of the underlying items is treated as a variable fee"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "The discount rate under VFA is updated, not locked in at inception."
      },
      {
        question: "Which of the following is NOT a requirement for the risk adjustment for non-financial risk?",
        options: [
          "It must correspond to the compensation the entity requires for bearing the uncertainty",
          "It must be measured using a confidence level, value-at-risk, or conditional tail expectation technique",
          "It must be calculated using a single prescribed method for all entities",
          "It excludes factors that do not have a financial effect"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "IFRS 17 does not prescribe a single method; entities can choose appropriate measurement techniques."
      },
      {
        question: "Which of the following is NOT a specified disclosure requirement under IFRS 17?",
        options: [
          "The significant judgments and changes in judgments made in applying the standard",
          "The methods and inputs used to measure the risk adjustment",
          "The names of the entity's largest policyholders",
          "A reconciliation from the opening to the closing balance of the insurance contract liabilities"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "Disclosure of policyholder names is not required under IFRS 17 due to confidentiality."
      },
      {
        question: "What is the primary purpose of the risk adjustment component under IFRS 17?",
        options: [
          "To account for investment returns",
          "To compensate the entity for bearing non-financial risk uncertainty",
          "To calculate premium rates",
          "To determine tax liabilities"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "The risk adjustment compensates the entity for bearing uncertainty about non-financial risks."
      },
      {
        question: "Which method is commonly used to quantify the risk adjustment?",
        options: [
          "Historical cost method",
          "Fair value method",
          "Cost of capital or confidence level methods",
          "Straight-line amortization"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "Common methods include cost of capital, confidence level, and conditional tail expectation approaches."
      },
      {
        question: "How does the risk adjustment affect the Contractual Service Margin?",
        options: [
          "It increases the CSM",
          "It decreases the CSM",
          "It has no direct effect on the CSM",
          "It replaces the CSM"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "A higher risk adjustment reduces the CSM, as it increases the fulfilment cash flows."
      },
      {
        question: "Which type of risk is specifically excluded from the risk adjustment?",
        options: [
          "Mortality risk",
          "Lapse risk",
          "Financial risk",
          "Expense risk"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "Financial risks are excluded from the risk adjustment and handled through discounting."
      },
      {
        question: "When should the risk adjustment be reassessed?",
        options: [
          "Only at contract inception",
          "At each reporting date",
          "Only when claims occur",
          "When management decides"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "The risk adjustment must be reassessed at each reporting date to reflect current conditions."
      }
    ];

    // Quiz functionality
    let currentQuestion = 0;
    let userAnswers = new Array(module9Questions.length).fill(null);
    let quizSubmitted = false;

    document.addEventListener('DOMContentLoaded', function() {
        const pageLoader = document.getElementById('pageLoader');
        
        // Update copyright year automatically
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        setTimeout(() => {
            pageLoader.classList.add('hidden');
            setTimeout(() => {
                pageLoader.remove();
                initializeQuiz();
            }, 500);
        }, 1500);

        // Add event listeners to buttons
        document.getElementById('nextQuestion').addEventListener('click', nextQuestion);
        document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
        document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
    });

    function initializeQuiz() {
        displayQuestion(currentQuestion);
        updateNavigation();
        updateProgress();
    }

    function displayQuestion(questionIndex) {
        const questionsContainer = document.getElementById('questionsContainer');
        const question = module9Questions[questionIndex];
        
        let optionsHtml = '';
        question.options.forEach((option, index) => {
            const isSelected = userAnswers[questionIndex] === index;
            optionsHtml += `
                <div class="option-item ${isSelected ? 'selected' : ''}" onclick="selectOption(${index})">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="question${questionIndex}" 
                               id="option${index}" ${isSelected ? 'checked' : ''}>
                        <label class="form-check-label" for="option${index}">
                            ${option}
                        </label>
                    </div>
                </div>
            `;
        });

        questionsContainer.innerHTML = `
            <div class="question-card">
                <div class="d-flex align-items-start">
                    <div class="question-number">${questionIndex + 1}</div>
                    <div class="flex-grow-1">
                        <h5>${question.question}</h5>
                        <div class="options-container mt-3">
                            ${optionsHtml}
                        </div>
                    </div>
                </div>
            </div>
        `;

        updateNavigation();
    }

    function updateNavigation() {
        const hasAnswer = userAnswers[currentQuestion] !== null;
        const isLastQuestion = currentQuestion === module9Questions.length - 1;
        const isFirstQuestion = currentQuestion === 0;

        // Show/hide previous button
        document.getElementById('prevQuestion').style.display = isFirstQuestion ? 'none' : 'inline-block';
        
        // Show/hide next and submit buttons
        if (isLastQuestion) {
            document.getElementById('nextQuestion').style.display = 'none';
            document.getElementById('submitQuiz').style.display = hasAnswer ? 'inline-block' : 'none';
        } else {
            document.getElementById('nextQuestion').style.display = hasAnswer ? 'inline-block' : 'none';
            document.getElementById('submitQuiz').style.display = 'none';
        }
    }

    function selectOption(optionIndex) {
        userAnswers[currentQuestion] = optionIndex;
        displayQuestion(currentQuestion);
        updateNavigation();
        updateProgress();
    }

    function nextQuestion() {
        if (currentQuestion < module9Questions.length - 1) {
            currentQuestion++;
            displayQuestion(currentQuestion);
            updateNavigation();
            updateProgress();
        }
    }

    function prevQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            displayQuestion(currentQuestion);
            updateNavigation();
            updateProgress();
        }
    }

    function updateProgress() {
        const progress = ((currentQuestion + 1) / module9Questions.length) * 100;
        document.getElementById('quizProgress').style.width = `${progress}%`;
        document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${module9Questions.length}`;
    }

    function submitQuiz() {
        quizSubmitted = true;
        calculateScore();
        showResults();
    }

    function calculateScore() {
        let score = 0;
        module9Questions.forEach((question, index) => {
            if (userAnswers[index] === question.correctAnswer) {
                score++;
            }
        });
        return score;
    }

    function showResults() {
        const score = calculateScore();
        const percentage = (score / module9Questions.length) * 100;
        
        document.getElementById('finalScore').textContent = `${score}/${module9Questions.length}`;
        document.getElementById('scoreProgress').style.width = `${percentage}%`;
        document.getElementById('scorePercentage').textContent = `${percentage.toFixed(1)}%`;
        
        let performanceText = '';
        if (percentage >= 90) performanceText = 'Excellent!';
        else if (percentage >= 80) performanceText = 'Very Good';
        else if (percentage >= 70) performanceText = 'Good';
        else if (percentage >= 60) performanceText = 'Satisfactory';
        else performanceText = 'Needs Improvement';
        
        document.getElementById('performanceText').textContent = performanceText;
        
        // Show questions review
        let reviewHtml = '<h4 class="mt-4">Question Review</h4>';
        module9Questions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === question.correctAnswer;
            const userAnswerText = userAnswer !== null ? question.options[userAnswer] : 'Not answered';
            const correctAnswerText = question.options[question.correctAnswer];
            
            reviewHtml += `
                <div class="question-card ${isCorrect ? 'border-success' : 'border-danger'}">
                    <div class="d-flex align-items-start">
                        <div class="question-number ${isCorrect ? 'bg-success' : 'bg-danger'}">${index + 1}</div>
                        <div class="flex-grow-1">
                            <h5>${question.question}</h5>
                            <div class="mt-3">
                                <p><strong>Your answer:</strong> 
                                <span class="${isCorrect ? 'text-success' : 'text-danger'}">${userAnswerText}</span></p>
                                ${!isCorrect ? `<p><strong>Correct answer:</strong> 
                                <span class="text-success">${correctAnswerText}</span></p>` : ''}
                                <p><strong>Explanation:</strong> ${question.explanation}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
        
        document.getElementById('questionsReview').innerHTML = reviewHtml;
        document.getElementById('resultsContainer').style.display = 'block';
        
        // Save progress to localStorage
        saveProgress(score, module9Questions.length);
    }

    function saveProgress(score, totalQuestions) {
        const progressData = {
            module: 9,
            score: score,
            totalQuestions: totalQuestions,
            percentage: (score / totalQuestions) * 100,
            completed: true,
            timestamp: new Date().toISOString()
        };
        
        let allProgress = JSON.parse(localStorage.getItem('kenbright_assessment_progress') || '[]');
        allProgress = allProgress.filter(item => item.module !== 9);
        allProgress.push(progressData);
        localStorage.setItem('kenbright_assessment_progress', JSON.stringify(allProgress));
        
        updateModuleCompletion(9);
    }

    function updateModuleCompletion(moduleNumber) {
        let moduleProgress = JSON.parse(localStorage.getItem('kenbright_module_progress') || '{}');
        moduleProgress[`module_${moduleNumber}`] = {
            completed: true,
            completionDate: new Date().toISOString(),
            score: calculateScore()
        };
        localStorage.setItem('kenbright_module_progress', JSON.stringify(moduleProgress));
    }

    // Make functions global for onclick events
    window.selectOption = selectOption;
    window.nextQuestion = nextQuestion;
    window.prevQuestion = prevQuestion;
    window.submitQuiz = submitQuiz;
  </script>
</body>
</html>