<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css2?family=Gill+Sans+Nova:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Module 5 Assessment | Kenbright IFRS 17 Training</title>
    
    <!-- CSS Files -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-scholar.css">
    <link rel="stylesheet" href="assets/css/modules.css">
    <style>
        /* Apply Gill Sans font to entire page */
        body {
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-weight: 600;
        }
        
        .nav li a {
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
        }
        
        .btn, .main-button a {
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
        }

        /* Simplified header styling */
        .header-area {
            padding: 0 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .main-nav {
            display: flex;
            align-items: center;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 15px 0;
        }

        /* Ensure navigation items are properly spaced */
        .main-nav .nav {
            display: flex;
            gap: 20px;
            margin: 0;
            padding: 0;
            list-style: none;
        }

        .main-nav .nav li a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .main-nav .nav li a:hover {
            color: #3B82F6;
        }

        /* Search input styling */
        .search-input {
            flex: 1;
            max-width: 400px;
            margin: 0 20px;
            position: relative;
        }

        .search-input input {
            width: 100%;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .search-input i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #777;
        }

        /* Logo Styles */
        .logo-image {
            height: 130px;
            width: auto;
            max-width: 500px;
        }

        .page-loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out;
        }
        
        .page-loader.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .assessment-container {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 30px 0;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .question-number {
            background: #667eea;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .option-item {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .option-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .option-item.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .option-item.correct {
            border-color: #28a745;
            background: #d4edda;
            color: #155724;
        }
        
        .option-item.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }
        
        .quiz-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .results-container {
            display: none;
            background: #fff;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #e9ecef;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }
        
        .score-display {
            font-size: 3rem;
            font-weight: bold;
            color: #667eea;
            text-align: center;
            margin: 20px 0;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
        }
        
        .progress-summary {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Gill Sans Nova', 'Gill Sans', sans-serif;
            font-size: 16px;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-nav {
                flex-direction: column;
                gap: 15px;
            }
            
            .search-input {
                max-width: 100%;
                margin: 10px 0;
            }
            
            .main-nav .nav {
                gap: 15px;
            }
            
            .logo-image {
                height: 35px;
                max-width: 150px;
            }
        }

        @media (max-width: 480px) {
            .logo-image {
                height: 30px;
                max-width: 130px;
            }
        }
    </style>
</head>

<body>

  <!-- Page Loader -->
  <div class="page-loader" id="pageLoader">
      <div class="loader-content">
          <div class="kenbright-loader">Kenbright</div>
          <div class="loader-spinner"></div>
          <div class="loader-text">Loading Assessment...</div>
      </div>
  </div>

  <!-- Header Area -->
  <header class="header-area header-sticky">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <nav class="main-nav">
                    <a href="index.html" class="logo">
                        <img src="assets/images/kenbright-logo.png" alt="Kenbright" class="logo-image">
                    </a>
                    <ul class="nav">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="modules.html">Training Modules</a></li>
                        <li><a href="assessments.html" class="active">Test Assessments</a></li>
                        <li><a href="progress.html">My Progress</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
  </header>

  <!-- Page Banner -->
  <div class="main-banner" id="top">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="header-text">
            <h2>Module 5 Assessment</h2>
            <p>General Measurement Model (GMM)</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Assessment Container -->
  <section class="section">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          
          <div class="quiz-header">
            <h3><i class="fa fa-question-circle"></i> Module 5 Quiz</h3>
            <p>Test your understanding of General Measurement Model</p>
            <div class="progress" style="height: 8px; background: rgba(255,255,255,0.3);">
              <div class="progress-bar" id="quizProgress" style="width: 0%"></div>
            </div>
            <small id="progressText">Question 1 of 15</small>
          </div>

          <div class="assessment-container">
            <div id="questionsContainer">
              <!-- Questions will be loaded here by JavaScript -->
            </div>
            
            <div class="navigation-buttons">
              <button class="main-button outline" id="prevQuestion" style="display: none;">
                <i class="fa fa-arrow-left"></i> Previous
              </button>
              <button class="main-button" id="submitQuiz" style="display: none;">
                Submit Assessment
              </button>
              <button class="main-button" id="nextQuestion" style="display: none;">
                Next <i class="fa fa-arrow-right"></i>
              </button>
            </div>
          </div>

          <div class="results-container" id="resultsContainer">
            <h3 class="text-center"><i class="fa fa-chart-bar"></i> Assessment Results</h3>
            <div class="score-display" id="finalScore">0/15</div>
            
            <div class="progress-summary">
              <div class="progress" style="height: 20px;">
                <div class="progress-bar" id="scoreProgress" role="progressbar" style="width: 0%"></div>
              </div>
              <div class="progress-text text-center mt-2">
                <span id="scorePercentage">0%</span> - <span id="performanceText">Beginner Level</span>
              </div>
            </div>

            <div id="questionsReview">
              <!-- Questions review will be loaded here -->
            </div>

            <div class="text-center mt-4">
              <button class="main-button outline" onclick="window.location.href='module-5.html'">
                <i class="fa fa-book"></i> Review Module
              </button>
              <button class="main-button" id="nextModuleBtn" onclick="window.location.href='module-6.html'">
                <i class="fa fa-arrow-right"></i> Proceed to Module 6
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="col-lg-12">
        <p>Copyright Â© <span id="currentYear">2025</span> Kenbright IFRS 17 Training Platform. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
  
  <script>
    // Module 5 Questions Data with UPDATED CORRECT answers
    const module5Questions = [
      {
        question: "What are the three main components that make up the Fulfilment Cash Flows (FCF) under the General Measurement Model?",
        options: [
          "Premiums, claims, and investments",
          "Assets, liabilities, and equity",
          "Future cash flows, discounting, and risk adjustment for non-financial risk",
          "Revenue, expenses, and profit"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "Fulfilment Cash Flows consist of future cash flows, discounting for time value of money, and risk adjustment for non-financial risk."
      },
      {
        question: "Under IFRS 17, what is the purpose of the Contractual Service Margin (CSM)?",
        options: [
          "To recognize immediate profit at contract inception",
          "To account for investment returns",
          "To represent unearned profit and ensure profit is recognized over the coverage period",
          "To calculate tax liabilities"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "The CSM represents unearned profit and ensures profit recognition occurs over the coverage period as services are provided."
      },
      {
        question: "Which of the following costs is EXCLUDED from the initial measurement of insurance contract liabilities under IFRS 17?",
        options: [
          "Acquisition expenses directly linked to the contract",
          "Anticipated claims and benefits",
          "Overhead and general administrative expenses",
          "Risk adjustment for non-financial risk"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "Overhead and general administrative expenses not directly attributable to contract acquisition are excluded from initial measurement."
      },
      {
        question: "What is the main reason for applying discounting to future cash flows under IFRS 17?",
        options: [
          "To inflate the value of liabilities",
          "To account for the time value of money",
          "To minimize fluctuations in financial reporting",
          "To meet IFRS 9 requirements"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "Discounting accounts for the time value of money, ensuring future cash flows are measured at present value."
      },
      {
        question: "Under the Premium Allocation Approach (PAA), when is the CSM typically not recorded explicitly?",
        options: [
          "For all insurance contracts",
          "Only for life insurance contracts",
          "For non-onerous short-term contracts where the approach is used as a simplification",
          "Only when contracts are with corporate clients"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "For non-onerous short-term contracts using PAA, the CSM is typically not recorded explicitly as a simplification."
      },
      {
        question: "If the Fulfilment Cash Flows are BWP 1,000 and the present value of expected premiums is BWP 1,250, what is the Contractual Service Margin?",
        options: [
          "BWP 2,250",
          "BWP 1,000",
          "BWP 250",
          "Zero, and a loss of BWP 250 is recognized"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "CSM = PV of premiums - Fulfilment Cash Flows = BWP 1,250 - BWP 1,000 = BWP 250."
      },
      {
        question: "How does IFRS 17 require entities to account for a potential 'Day-1 gain' on initial recognition of an insurance contract?",
        options: [
          "Recognized immediately in profit or loss",
          "Recorded in Other Comprehensive Income (OCI)",
          "Deferred as part of the Contractual Service Margin (CSM) and released over time",
          "Credited directly to retained earnings"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "Day-1 gains are deferred in the CSM and released to profit or loss over the coverage period."
      },
      {
        question: "An insurer writes six-month travel insurance policies and applies the Premium Allocation Approach. No CSM is recorded. Why is this acceptable under IFRS 17?",
        options: [
          "Because CSM only applies to long-term health policies",
          "Because the PAA does not require explicit CSM recognition for non-onerous short-term contracts",
          "Because all insurance contracts under IFRS 17 are measured without CSM",
          "Because travel insurance is exempt from IFRS 17 requirements"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "PAA allows simplified accounting for short-term contracts without explicit CSM recognition for non-onerous contracts."
      },
      {
        question: "Under IFRS 17, how is the discount rate determined at initial recognition?",
        options: [
          "Based on a zero-coupon government bond rate only",
          "It is locked in at the date the insurance contract is initially recognized and used consistently for related measurements",
          "Based on an average of short-term and long-term market rates",
          "Derived from the central bank's prime lending rate at year-end"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "The discount rate is locked in at initial recognition and used consistently for related measurements throughout the contract."
      },
      {
        question: "A one-year motor insurance policy yields very similar liability estimates under both PAA and GMM. What justifies using the Premium Allocation Approach in this case?",
        options: [
          "PAA always leads to a higher CSM",
          "The contract includes profit-sharing features",
          "The measurement outcome under PAA is not materially different from GMM",
          "PAA automatically excludes all acquisition costs"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "PAA can be used when the measurement outcome is not materially different from GMM, providing operational simplification."
      },
      {
        question: "An insurer's pre-recognition assessment shows: PV of premiums = BWP 8,000; PV of claims and expenses = BWP 7,200; Risk Adjustment = BWP 1,000. What is the accounting treatment at initial recognition?",
        options: [
          "Recognize liability of BWP 8,000 with CSM of BWP 200",
          "Recognize liability of BWP 8,200 with no CSM",
          "Recognize liability of BWP 8,200 with CSM of BWP 0 and immediate loss of BWP 200",
          "Delay recognition until the contract becomes profitable"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "FCF = BWP 7,200 + BWP 1,000 = BWP 8,200; PV premiums = BWP 8,000; Loss = BWP 200 recognized immediately."
      },
      {
        question: "The prohibition against recognizing 'Day-1 gains' under IFRS 17 primarily addresses which fundamental accounting concern?",
        options: [
          "Conservative revenue recognition",
          "Matching principle application",
          "Prevention of premature profit recognition before services are rendered",
          "Simplification of accounting measurements"
        ],
        correctAnswer: 0, // 1st choice
        explanation: "The prohibition prevents premature profit recognition before services are rendered to policyholders."
      },
      {
        question: "Which of the following would NOT be included in the fulfilment cash flows measurement?",
        options: [
          "Probabilistic estimates of future premiums expected under the contract terms",
          "The discount rate applied to reflect the time value of money",
          "A risk adjustment reflecting compensation for bearing non-financial uncertainty",
          "A commission-based staff bonus pool linked to overall company sales targets"
        ],
        correctAnswer: 3, // 4th choice
        explanation: "General staff bonus pools not directly attributable to specific contracts are excluded from fulfilment cash flows."
      },
      {
        question: "The requirement to immediately recognize losses for onerous contracts, rather than deferring them, fundamentally changes insurance accounting by:",
        options: [
          "Allowing insurers to smooth earnings over multiple periods",
          "Reducing transparency in financial reporting",
          "Ensuring timely recognition of unfavorable contract outcomes rather than deferring losses",
          "Simplifying the calculation of insurance liabilities"
        ],
        correctAnswer: 1, // 2nd choice
        explanation: "Immediate loss recognition ensures timely reporting of unfavorable contracts rather than deferring losses."
      },
      {
        question: "The choice between using the General Measurement Model (GMM) versus the Premium Allocation Approach (PAA) is primarily determined by:",
        options: [
          "The insurer's preference for complexity",
          "The type of insurance regulator overseeing the company",
          "Contract characteristics such as duration and materiality differences in measurement outcomes",
          "The accounting software capabilities of the insurer"
        ],
        correctAnswer: 2, // 3rd choice
        explanation: "The choice depends on contract characteristics and materiality differences between measurement approaches."
      }
    ];

    // Quiz functionality
    let currentQuestion = 0;
    let userAnswers = new Array(module5Questions.length).fill(null);
    let quizSubmitted = false;

    document.addEventListener('DOMContentLoaded', function() {
        const pageLoader = document.getElementById('pageLoader');
        
        // Update copyright year automatically
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        setTimeout(() => {
            pageLoader.classList.add('hidden');
            setTimeout(() => {
                pageLoader.remove();
                initializeQuiz();
            }, 500);
        }, 1500);

        // Add event listeners to buttons
        document.getElementById('nextQuestion').addEventListener('click', nextQuestion);
        document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
        document.getElementById('submitQuiz').addEventListener('click', submitQuiz);
    });

    function initializeQuiz() {
        displayQuestion(currentQuestion);
        updateNavigation();
        updateProgress();
    }

    function displayQuestion(questionIndex) {
        const questionsContainer = document.getElementById('questionsContainer');
        const question = module5Questions[questionIndex];
        
        let optionsHtml = '';
        question.options.forEach((option, index) => {
            const isSelected = userAnswers[questionIndex] === index;
            optionsHtml += `
                <div class="option-item ${isSelected ? 'selected' : ''}" onclick="selectOption(${index})">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="question${questionIndex}" 
                               id="option${index}" ${isSelected ? 'checked' : ''}>
                        <label class="form-check-label" for="option${index}">
                            ${option}
                        </label>
                    </div>
                </div>
            `;
        });

        questionsContainer.innerHTML = `
            <div class="question-card">
                <div class="d-flex align-items-start">
                    <div class="question-number">${questionIndex + 1}</div>
                    <div class="flex-grow-1">
                        <h5>${question.question}</h5>
                        <div class="options-container mt-3">
                            ${optionsHtml}
                        </div>
                    </div>
                </div>
            </div>
        `;

        updateNavigation();
    }

    function updateNavigation() {
        const hasAnswer = userAnswers[currentQuestion] !== null;
        const isLastQuestion = currentQuestion === module5Questions.length - 1;
        const isFirstQuestion = currentQuestion === 0;

        // Show/hide previous button
        document.getElementById('prevQuestion').style.display = isFirstQuestion ? 'none' : 'inline-block';
        
        // Show/hide next and submit buttons
        if (isLastQuestion) {
            document.getElementById('nextQuestion').style.display = 'none';
            document.getElementById('submitQuiz').style.display = hasAnswer ? 'inline-block' : 'none';
        } else {
            document.getElementById('nextQuestion').style.display = hasAnswer ? 'inline-block' : 'none';
            document.getElementById('submitQuiz').style.display = 'none';
        }
    }

    function selectOption(optionIndex) {
        userAnswers[currentQuestion] = optionIndex;
        displayQuestion(currentQuestion);
        updateNavigation();
        updateProgress();
    }

    function nextQuestion() {
        if (currentQuestion < module5Questions.length - 1) {
            currentQuestion++;
            displayQuestion(currentQuestion);
            updateNavigation();
            updateProgress();
        }
    }

    function prevQuestion() {
        if (currentQuestion > 0) {
            currentQuestion--;
            displayQuestion(currentQuestion);
            updateNavigation();
            updateProgress();
        }
    }

    function updateProgress() {
        const progress = ((currentQuestion + 1) / module5Questions.length) * 100;
        document.getElementById('quizProgress').style.width = `${progress}%`;
        document.getElementById('progressText').textContent = `Question ${currentQuestion + 1} of ${module5Questions.length}`;
    }

    function submitQuiz() {
        quizSubmitted = true;
        calculateScore();
        showResults();
    }

    function calculateScore() {
        let score = 0;
        module5Questions.forEach((question, index) => {
            if (userAnswers[index] === question.correctAnswer) {
                score++;
            }
        });
        return score;
    }

    function showResults() {
        const score = calculateScore();
        const percentage = (score / module5Questions.length) * 100;
        
        document.getElementById('finalScore').textContent = `${score}/${module5Questions.length}`;
        document.getElementById('scoreProgress').style.width = `${percentage}%`;
        document.getElementById('scorePercentage').textContent = `${percentage.toFixed(1)}%`;
        
        let performanceText = '';
        if (percentage >= 90) performanceText = 'Excellent!';
        else if (percentage >= 80) performanceText = 'Very Good';
        else if (percentage >= 70) performanceText = 'Good';
        else if (percentage >= 60) performanceText = 'Satisfactory';
        else performanceText = 'Needs Improvement';
        
        document.getElementById('performanceText').textContent = performanceText;
        
        // Show questions review
        let reviewHtml = '<h4 class="mt-4">Question Review</h4>';
        module5Questions.forEach((question, index) => {
            const userAnswer = userAnswers[index];
            const isCorrect = userAnswer === question.correctAnswer;
            const userAnswerText = userAnswer !== null ? question.options[userAnswer] : 'Not answered';
            const correctAnswerText = question.options[question.correctAnswer];
            
            reviewHtml += `
                <div class="question-card ${isCorrect ? 'border-success' : 'border-danger'}">
                    <div class="d-flex align-items-start">
                        <div class="question-number ${isCorrect ? 'bg-success' : 'bg-danger'}">${index + 1}</div>
                        <div class="flex-grow-1">
                            <h5>${question.question}</h5>
                            <div class="mt-3">
                                <p><strong>Your answer:</strong> 
                                <span class="${isCorrect ? 'text-success' : 'text-danger'}">${userAnswerText}</span></p>
                                ${!isCorrect ? `<p><strong>Correct answer:</strong> 
                                <span class="text-success">${correctAnswerText}</span></p>` : ''}
                                <p><strong>Explanation:</strong> ${question.explanation}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
        
        document.getElementById('questionsReview').innerHTML = reviewHtml;
        document.getElementById('resultsContainer').style.display = 'block';
        
        // Save progress to localStorage
        saveProgress(score, module5Questions.length);
    }

    function saveProgress(score, totalQuestions) {
        const progressData = {
            module: 5,
            score: score,
            totalQuestions: totalQuestions,
            percentage: (score / totalQuestions) * 100,
            completed: true,
            timestamp: new Date().toISOString()
        };
        
        let allProgress = JSON.parse(localStorage.getItem('kenbright_assessment_progress') || '[]');
        allProgress = allProgress.filter(item => item.module !== 5);
        allProgress.push(progressData);
        localStorage.setItem('kenbright_assessment_progress', JSON.stringify(allProgress));
        
        updateModuleCompletion(5);
    }

    function updateModuleCompletion(moduleNumber) {
        let moduleProgress = JSON.parse(localStorage.getItem('kenbright_module_progress') || '{}');
        moduleProgress[`module_${moduleNumber}`] = {
            completed: true,
            completionDate: new Date().toISOString(),
            score: calculateScore()
        };
        localStorage.setItem('kenbright_module_progress', JSON.stringify(moduleProgress));
    }

    // Make functions global for onclick events
    window.selectOption = selectOption;
    window.nextQuestion = nextQuestion;
    window.prevQuestion = prevQuestion;
    window.submitQuiz = submitQuiz;
  </script>
</body>
</html>